{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { SpinnerIconComponent } from '../icons/spinner-icon.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/gemini.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction QuizGeneratorComponent_div_3_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-spinner-icon\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"className\", \"w-5 h-5 mr-3\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.loadingMessage || \"Processing...\", \" \");\n  }\n}\nfunction QuizGeneratorComponent_div_3_ng_container_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"Generate Quiz with AI\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction QuizGeneratorComponent_div_3_p_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r5.error);\n  }\n}\nfunction QuizGeneratorComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4)(2, \"div\")(3, \"label\", 5);\n    i0.ɵɵtext(4, \"Quiz Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function QuizGeneratorComponent_div_3_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.quizTitle = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\")(7, \"label\", 7);\n    i0.ɵɵtext(8, \"Study Content\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"textarea\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function QuizGeneratorComponent_div_3_Template_textarea_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.textContent = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 9)(11, \"label\", 10)(12, \"span\");\n    i0.ɵɵtext(13, \"Upload File\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 11);\n    i0.ɵɵlistener(\"change\", function QuizGeneratorComponent_div_3_Template_input_change_14_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.handleFileChange($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\")(16, \"label\", 12);\n    i0.ɵɵtext(17, \"Questions:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function QuizGeneratorComponent_div_3_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.numQuestions = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function QuizGeneratorComponent_div_3_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.handleGenerateQuiz());\n    });\n    i0.ɵɵtemplate(20, QuizGeneratorComponent_div_3_ng_container_20_Template, 3, 2, \"ng-container\", 15);\n    i0.ɵɵtemplate(21, QuizGeneratorComponent_div_3_ng_container_21_Template, 2, 0, \"ng-container\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(22, QuizGeneratorComponent_div_3_p_22_Template, 2, 1, \"p\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.quizTitle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.textContent);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.numQuestions);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.error);\n  }\n}\nfunction QuizGeneratorComponent_ng_template_4_div_4_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 32);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const opt_r16 = ctx.$implicit;\n    const q_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngClass\", opt_r16 === q_r13.correctAnswer ? \"text-green-600 dark:text-green-400 font-medium\" : \"text-slate-600 dark:text-slate-400\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", opt_r16 === q_r13.correctAnswer ? \"\\u2713\" : \"\\u2022\", \" \", opt_r16, \" \");\n  }\n}\nfunction QuizGeneratorComponent_ng_template_4_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"p\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 30);\n    i0.ɵɵtemplate(4, QuizGeneratorComponent_ng_template_4_div_4_li_4_Template, 2, 3, \"li\", 31);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const q_r13 = ctx.$implicit;\n    const index_r14 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", index_r14 + 1, \". \", q_r13.question, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", q_r13.options);\n  }\n}\nfunction QuizGeneratorComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 20);\n    i0.ɵɵtemplate(4, QuizGeneratorComponent_ng_template_4_div_4_Template, 5, 3, \"div\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 22)(6, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function QuizGeneratorComponent_ng_template_4_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.allowRetakes = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 24);\n    i0.ɵɵtext(8, \"Allow students to retake this quiz\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 25)(10, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function QuizGeneratorComponent_ng_template_4_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.generatedQuestions = null);\n    });\n    i0.ɵɵtext(11, \"Edit & Regenerate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function QuizGeneratorComponent_ng_template_4_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.handlePublishQuiz());\n    });\n    i0.ɵɵtext(13, \"Publish Quiz\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Review Generated Quiz: \\\"\", ctx_r2.quizTitle, \"\\\"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.generatedQuestions);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.allowRetakes);\n  }\n}\nexport let QuizGeneratorComponent = /*#__PURE__*/(() => {\n  class QuizGeneratorComponent {\n    geminiService;\n    quizGenerated = new EventEmitter();\n    textContent = '';\n    quizTitle = '';\n    numQuestions = 5;\n    generatedQuestions = null;\n    isLoading = false;\n    loadingMessage = null;\n    error = null;\n    allowRetakes = true;\n    MOCK_PPT_TEXT = `The Roman Republic was founded in 509 BC when the last king of Rome was overthrown. It was a state of the classical Roman civilization, characterized by a republican form of government. The Republic was governed by an elected Senate. Key figures from this era include Julius Caesar, Cicero, and Augustus. The Republic eventually transformed into the Roman Empire in 27 BC.`;\n    MOCK_VIDEO_TRANSCRIPT = `(speaker) ...so, when we talk about astrophysics, we're really looking at the physics of the universe. This includes the properties and interactions of celestial objects. For example, stars like our sun are giant nuclear furnaces. They generate energy through nuclear fusion, primarily converting hydrogen into helium in their cores. This process releases a tremendous amount of energy, which is why stars shine. The lifecycle of a star depends heavily on its mass. Smaller stars become white dwarfs, while massive stars can end their lives in a spectacular supernova explosion...`;\n    constructor(geminiService) {\n      this.geminiService = geminiService;\n    }\n    handleFileChange(event) {\n      const input = event.target;\n      const file = input.files?.[0];\n      if (!file) return;\n      this.error = null;\n      const extension = file.name.split('.').pop()?.toLowerCase();\n      if (extension === 'txt') {\n        const reader = new FileReader();\n        reader.onload = e => this.textContent = e.target?.result;\n        reader.readAsText(file);\n      } else if (['ppt', 'pptx'].includes(extension || '')) {\n        this.isLoading = true;\n        this.loadingMessage = 'Extracting text from presentation...';\n        setTimeout(() => {\n          this.textContent = this.MOCK_PPT_TEXT;\n          this.isLoading = false;\n          this.loadingMessage = null;\n        }, 2500);\n      } else if (['mp4', 'mov', 'webm'].includes(extension || '')) {\n        this.isLoading = true;\n        this.loadingMessage = 'Transcribing video...';\n        setTimeout(() => {\n          this.textContent = this.MOCK_VIDEO_TRANSCRIPT;\n          this.isLoading = false;\n          this.loadingMessage = null;\n        }, 4000);\n      } else {\n        this.error = 'Unsupported file type.';\n      }\n      input.value = '';\n    }\n    handleGenerateQuiz() {\n      if (!this.textContent.trim() || !this.quizTitle.trim()) {\n        this.error = 'Please provide a quiz title and content.';\n        return;\n      }\n      this.isLoading = true;\n      this.loadingMessage = 'Generating Quiz with AI...';\n      this.error = null;\n      this.generatedQuestions = null;\n      this.geminiService.generateQuizFromText(this.textContent, this.numQuestions).subscribe({\n        next: questions => {\n          this.generatedQuestions = questions;\n          this.isLoading = false;\n          this.loadingMessage = null;\n        },\n        error: err => {\n          this.error = err.message || 'An unknown error occurred.';\n          this.isLoading = false;\n          this.loadingMessage = null;\n        }\n      });\n    }\n    handlePublishQuiz() {\n      if (this.generatedQuestions && this.quizTitle) {\n        this.quizGenerated.emit({\n          title: this.quizTitle,\n          questions: this.generatedQuestions,\n          retakeAllowed: this.allowRetakes\n        });\n        this.quizTitle = '';\n        this.textContent = '';\n        this.generatedQuestions = null;\n      }\n    }\n    static ɵfac = function QuizGeneratorComponent_Factory(t) {\n      return new (t || QuizGeneratorComponent)(i0.ɵɵdirectiveInject(i1.GeminiService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: QuizGeneratorComponent,\n      selectors: [[\"app-quiz-generator\"]],\n      outputs: {\n        quizGenerated: \"quizGenerated\"\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 6,\n      vars: 2,\n      consts: [[1, \"bg-white\", \"dark:bg-slate-800\", \"rounded-lg\", \"shadow-lg\", \"p-6\", \"w-full\"], [1, \"text-xl\", \"font-bold\", \"text-slate-800\", \"dark:text-white\", \"mb-4\"], [4, \"ngIf\", \"ngIfElse\"], [\"reviewQuiz\", \"\"], [1, \"space-y-4\"], [\"for\", \"quizTitle\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-slate-700\", \"dark:text-slate-300\"], [\"type\", \"text\", \"id\", \"quizTitle\", \"placeholder\", \"e.g., Chapter 1: Introduction\", 1, \"mt-1\", \"block\", \"w-full\", \"px-3\", \"py-2\", \"bg-white\", \"dark:bg-slate-700\", \"border\", \"border-slate-300\", \"dark:border-slate-600\", \"rounded-md\", \"shadow-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"textContent\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-slate-700\", \"dark:text-slate-300\"], [\"id\", \"textContent\", \"rows\", \"10\", \"placeholder\", \"Paste study material or upload a file.\", 1, \"mt-1\", \"block\", \"w-full\", \"px-3\", \"py-2\", \"bg-white\", \"dark:bg-slate-700\", \"border\", \"border-slate-300\", \"dark:border-slate-600\", \"rounded-md\", \"shadow-sm\", 3, \"ngModel\", \"ngModelChange\"], [1, \"flex\", \"items-center\", \"justify-between\"], [\"for\", \"file-upload\", 1, \"cursor-pointer\", \"inline-flex\", \"items-center\", \"px-4\", \"py-2\", \"border\", \"border-transparent\", \"text-sm\", \"font-medium\", \"rounded-md\", \"shadow-sm\", \"text-white\", \"bg-slate-600\", \"hover:bg-slate-700\"], [\"id\", \"file-upload\", \"type\", \"file\", \"accept\", \".txt,.ppt,.pptx,.mp4,.mov,.webm\", 1, \"sr-only\", 3, \"change\"], [\"for\", \"numQuestions\", 1, \"text-sm\", \"font-medium\", \"text-slate-700\", \"dark:text-slate-300\", \"mr-2\"], [\"type\", \"number\", \"id\", \"numQuestions\", \"min\", \"1\", \"max\", \"10\", 1, \"w-20\", \"px-2\", \"py-1\", \"bg-white\", \"dark:bg-slate-700\", \"border\", \"border-slate-300\", \"dark:border-slate-600\", \"rounded-md\", \"shadow-sm\", \"text-center\", 3, \"ngModel\", \"ngModelChange\"], [1, \"w-full\", \"inline-flex\", \"justify-center\", \"items-center\", \"px-6\", \"py-3\", \"border\", \"border-transparent\", \"text-base\", \"font-medium\", \"rounded-md\", \"shadow-sm\", \"text-white\", \"bg-sky-600\", \"hover:bg-sky-700\", \"disabled:bg-sky-300\", 3, \"disabled\", \"click\"], [4, \"ngIf\"], [\"class\", \"text-red-500 text-sm mt-2 text-center\", 4, \"ngIf\"], [3, \"className\"], [1, \"text-red-500\", \"text-sm\", \"mt-2\", \"text-center\"], [1, \"text-lg\", \"font-semibold\", \"text-slate-800\", \"dark:text-white\", \"mb-4\"], [1, \"space-y-4\", \"max-h-80\", \"overflow-y-auto\", \"pr-2\"], [\"class\", \"p-4 border border-slate-200 dark:border-slate-700 rounded-md\", 4, \"ngFor\", \"ngForOf\"], [1, \"mt-4\", \"flex\", \"items-center\"], [\"id\", \"allowRetakes\", \"type\", \"checkbox\", 1, \"h-4\", \"w-4\", \"rounded\", \"border-gray-300\", \"text-sky-600\", \"focus:ring-sky-500\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"allowRetakes\", 1, \"ml-2\", \"block\", \"text-sm\", \"text-gray-900\", \"dark:text-gray-300\"], [1, \"mt-6\", \"flex\", \"justify-end\", \"space-x-3\"], [1, \"px-4\", \"py-2\", \"border\", \"border-slate-300\", \"text-sm\", \"font-medium\", \"rounded-md\", 3, \"click\"], [1, \"px-4\", \"py-2\", \"border\", \"border-transparent\", \"text-sm\", \"font-medium\", \"rounded-md\", \"shadow-sm\", \"text-white\", \"bg-sky-600\", \"hover:bg-sky-700\", 3, \"click\"], [1, \"p-4\", \"border\", \"border-slate-200\", \"dark:border-slate-700\", \"rounded-md\"], [1, \"font-semibold\", \"text-slate-700\", \"dark:text-slate-200\"], [1, \"mt-2\", \"space-y-1\"], [\"class\", \"text-sm\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-sm\", 3, \"ngClass\"]],\n      template: function QuizGeneratorComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n          i0.ɵɵtext(2, \"Create New Quiz\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, QuizGeneratorComponent_div_3_Template, 23, 7, \"div\", 2);\n          i0.ɵɵtemplate(4, QuizGeneratorComponent_ng_template_4_Template, 14, 3, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(5);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", !ctx.generatedQuestions)(\"ngIfElse\", _r1);\n        }\n      },\n      dependencies: [CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf, FormsModule, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.CheckboxControlValueAccessor, i3.NgControlStatus, i3.MinValidator, i3.MaxValidator, i3.NgModel, SpinnerIconComponent],\n      encapsulation: 2\n    });\n  }\n  return QuizGeneratorComponent;\n})();","map":{"version":3,"mappings":"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","names":["EventEmitter","CommonModule","FormsModule","SpinnerIconComponent","i0","QuizGeneratorComponent","geminiService","quizGenerated","textContent","quizTitle","numQuestions","generatedQuestions","isLoading","loadingMessage","error","allowRetakes","MOCK_PPT_TEXT","MOCK_VIDEO_TRANSCRIPT","constructor","handleFileChange","event","input","target","file","files","extension","name","split","pop","toLowerCase","reader","FileReader","onload","e","result","readAsText","includes","setTimeout","value","handleGenerateQuiz","trim","generateQuizFromText","subscribe","next","questions","err","message","handlePublishQuiz","emit","title","retakeAllowed","selectors","outputs","standalone","features","decls","vars","consts","template","encapsulation"],"sourceRoot":"","sources":["D:\\learning-portal\\frontend\\src\\app\\components\\quiz-generator\\quiz-generator.component.ts","D:\\learning-portal\\frontend\\src\\app\\components\\quiz-generator\\quiz-generator.component.html"],"sourcesContent":["import { Component, Output, EventEmitter } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { GeminiService } from '../../services/gemini.service';\r\nimport { Question, Quiz } from '../../types';\r\nimport { SpinnerIconComponent } from '../icons/spinner-icon.component';\r\n\r\n@Component({\r\n  selector: 'app-quiz-generator',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, SpinnerIconComponent],\r\n  templateUrl: './quiz-generator.component.html',\r\n})\r\nexport class QuizGeneratorComponent {\r\n  @Output() quizGenerated = new EventEmitter<Omit<Quiz, 'id' | 'submissions'>>();\r\n\r\n  textContent = '';\r\n  quizTitle = '';\r\n  numQuestions = 5;\r\n  generatedQuestions: Question[] | null = null;\r\n  isLoading = false;\r\n  loadingMessage: string | null = null;\r\n  error: string | null = null;\r\n  allowRetakes = true;\r\n  \r\n  MOCK_PPT_TEXT = `The Roman Republic was founded in 509 BC when the last king of Rome was overthrown. It was a state of the classical Roman civilization, characterized by a republican form of government. The Republic was governed by an elected Senate. Key figures from this era include Julius Caesar, Cicero, and Augustus. The Republic eventually transformed into the Roman Empire in 27 BC.`;\r\n  MOCK_VIDEO_TRANSCRIPT = `(speaker) ...so, when we talk about astrophysics, we're really looking at the physics of the universe. This includes the properties and interactions of celestial objects. For example, stars like our sun are giant nuclear furnaces. They generate energy through nuclear fusion, primarily converting hydrogen into helium in their cores. This process releases a tremendous amount of energy, which is why stars shine. The lifecycle of a star depends heavily on its mass. Smaller stars become white dwarfs, while massive stars can end their lives in a spectacular supernova explosion...`;\r\n\r\n  constructor(private geminiService: GeminiService) {}\r\n\r\n  handleFileChange(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    const file = input.files?.[0];\r\n    if (!file) return;\r\n\r\n    this.error = null;\r\n    const extension = file.name.split('.').pop()?.toLowerCase();\r\n\r\n    if (extension === 'txt') {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => this.textContent = e.target?.result as string;\r\n      reader.readAsText(file);\r\n    } else if (['ppt', 'pptx'].includes(extension || '')) {\r\n      this.isLoading = true;\r\n      this.loadingMessage = 'Extracting text from presentation...';\r\n      setTimeout(() => {\r\n        this.textContent = this.MOCK_PPT_TEXT;\r\n        this.isLoading = false;\r\n        this.loadingMessage = null;\r\n      }, 2500);\r\n    } else if (['mp4', 'mov', 'webm'].includes(extension || '')) {\r\n      this.isLoading = true;\r\n      this.loadingMessage = 'Transcribing video...';\r\n      setTimeout(() => {\r\n        this.textContent = this.MOCK_VIDEO_TRANSCRIPT;\r\n        this.isLoading = false;\r\n        this.loadingMessage = null;\r\n      }, 4000);\r\n    } else {\r\n      this.error = 'Unsupported file type.';\r\n    }\r\n    input.value = '';\r\n  }\r\n\r\n  handleGenerateQuiz(): void {\r\n    if (!this.textContent.trim() || !this.quizTitle.trim()) {\r\n      this.error = 'Please provide a quiz title and content.';\r\n      return;\r\n    }\r\n    this.isLoading = true;\r\n    this.loadingMessage = 'Generating Quiz with AI...';\r\n    this.error = null;\r\n    this.generatedQuestions = null;\r\n    \r\n    this.geminiService.generateQuizFromText(this.textContent, this.numQuestions).subscribe({\r\n      next: (questions) => {\r\n        this.generatedQuestions = questions;\r\n        this.isLoading = false;\r\n        this.loadingMessage = null;\r\n      },\r\n      error: (err) => {\r\n        this.error = err.message || 'An unknown error occurred.';\r\n        this.isLoading = false;\r\n        this.loadingMessage = null;\r\n      }\r\n    });\r\n  }\r\n\r\n  handlePublishQuiz(): void {\r\n    if (this.generatedQuestions && this.quizTitle) {\r\n      this.quizGenerated.emit({\r\n        title: this.quizTitle,\r\n        questions: this.generatedQuestions,\r\n        retakeAllowed: this.allowRetakes,\r\n      });\r\n      this.quizTitle = '';\r\n      this.textContent = '';\r\n      this.generatedQuestions = null;\r\n    }\r\n  }\r\n}\r\n","<div class=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 w-full\">\n    <h3 class=\"text-xl font-bold text-slate-800 dark:text-white mb-4\">Create New Quiz</h3>\n    \n    <div *ngIf=\"!generatedQuestions; else reviewQuiz\">\n      <div class=\"space-y-4\">\n        <div>\n          <label for=\"quizTitle\" class=\"block text-sm font-medium text-slate-700 dark:text-slate-300\">Quiz Title</label>\n          <input type=\"text\" id=\"quizTitle\" [(ngModel)]=\"quizTitle\" class=\"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm\" placeholder=\"e.g., Chapter 1: Introduction\">\n        </div>\n        <div>\n          <label for=\"textContent\" class=\"block text-sm font-medium text-slate-700 dark:text-slate-300\">Study Content</label>\n          <textarea id=\"textContent\" rows=\"10\" [(ngModel)]=\"textContent\" class=\"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm\" placeholder=\"Paste study material or upload a file.\"></textarea>\n        </div>\n        <div class=\"flex items-center justify-between\">\n          <label for=\"file-upload\" class=\"cursor-pointer inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-slate-600 hover:bg-slate-700\">\n            <span>Upload File</span>\n            <input id=\"file-upload\" type=\"file\" accept=\".txt,.ppt,.pptx,.mp4,.mov,.webm\" class=\"sr-only\" (change)=\"handleFileChange($event)\">\n          </label>\n          <div>\n            <label for=\"numQuestions\" class=\"text-sm font-medium text-slate-700 dark:text-slate-300 mr-2\">Questions:</label>\n            <input type=\"number\" id=\"numQuestions\" min=\"1\" max=\"10\" [(ngModel)]=\"numQuestions\" class=\"w-20 px-2 py-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm text-center\">\n          </div>\n        </div>\n        <button (click)=\"handleGenerateQuiz()\" [disabled]=\"isLoading\" class=\"w-full inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-sky-600 hover:bg-sky-700 disabled:bg-sky-300\">\n          <ng-container *ngIf=\"isLoading\">\n            <app-spinner-icon [className]=\"'w-5 h-5 mr-3'\"></app-spinner-icon>\n            {{ loadingMessage || 'Processing...' }}\n          </ng-container>\n          <ng-container *ngIf=\"!isLoading\">Generate Quiz with AI</ng-container>\n        </button>\n        <p *ngIf=\"error\" class=\"text-red-500 text-sm mt-2 text-center\">{{ error }}</p>\n      </div>\n    </div>\n  \n    <ng-template #reviewQuiz>\n      <div>\n        <h4 class=\"text-lg font-semibold text-slate-800 dark:text-white mb-4\">Review Generated Quiz: \"{{ quizTitle }}\"</h4>\n        <div class=\"space-y-4 max-h-80 overflow-y-auto pr-2\">\n          <div *ngFor=\"let q of generatedQuestions; let index = index\" class=\"p-4 border border-slate-200 dark:border-slate-700 rounded-md\">\n            <p class=\"font-semibold text-slate-700 dark:text-slate-200\">{{ index + 1 }}. {{ q.question }}</p>\n            <ul class=\"mt-2 space-y-1\">\n              <li *ngFor=\"let opt of q.options\" class=\"text-sm\" [ngClass]=\"opt === q.correctAnswer ? 'text-green-600 dark:text-green-400 font-medium' : 'text-slate-600 dark:text-slate-400'\">\n                {{ opt === q.correctAnswer ? '✓' : '•' }} {{ opt }}\n              </li>\n            </ul>\n          </div>\n        </div>\n         <div class=\"mt-4 flex items-center\">\n          <input id=\"allowRetakes\" type=\"checkbox\" [(ngModel)]=\"allowRetakes\" class=\"h-4 w-4 rounded border-gray-300 text-sky-600 focus:ring-sky-500\">\n          <label for=\"allowRetakes\" class=\"ml-2 block text-sm text-gray-900 dark:text-gray-300\">Allow students to retake this quiz</label>\n        </div>\n        <div class=\"mt-6 flex justify-end space-x-3\">\n          <button (click)=\"generatedQuestions = null\" class=\"px-4 py-2 border border-slate-300 text-sm font-medium rounded-md\">Edit & Regenerate</button>\n          <button (click)=\"handlePublishQuiz()\" class=\"px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-sky-600 hover:bg-sky-700\">Publish Quiz</button>\n        </div>\n      </div>\n    </ng-template>\n  </div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}